!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("react"),require("prop-types"),require("lodash.throttle"),require("raf"),require("react-dnd")):"function"==typeof define&&define.amd?define(["react","prop-types","lodash.throttle","raf","react-dnd"],r):(e=e||self)["dnd-scrolling"]=r(e.React,e.PropTypes,e.throttle,e.raf,e.reactDnd)}(this,function(o,r,i,u,a){"use strict";function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(){return(c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,r){return(f=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function p(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],0<=r.indexOf(t)||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],0<=r.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}o=o&&o.hasOwnProperty("default")?o.default:o,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i,u=u&&u.hasOwnProperty("default")?u.default:u;var g=60,h=600,y=100,b=100;function t(t){var e=function(e){function a(){var e,t;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return l(d(t=function(e,r){return!r||"object"!=typeof r&&"function"!=typeof r?d(e):r}(this,(e=s(a)).call.apply(e,[this].concat(n)))),"state",{}),l(d(t),"scale",0),l(d(t),"dragging",!1),l(d(t),"updateScrolling",i(function(e){if(t.dragging){var r=function(e){return{x:e.clientX,y:e.clientY}}(e);t.scale=function(e,r,t,n){if(n.y>=r&&n.y<=r+t){if(n.y<r+e)return(n.y-r-e)/e;if(n.y>r+t-e)return-(r+t-n.y-e)/e}return 0}(t.props.threshold,0,t.props.area,r),0!==t.scale?!t.frame&&t.scale&&t.startScrolling():t.stopScrolling()}},b)),t}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&f(e,r)}(a,o.Component),function(e,r,t){r&&n(e.prototype,r),t&&n(e,t)}(a,[{key:"startScrolling",value:function(){var n=this;!function e(){var r=n.scale,t=n.props.speed;window.scrollBy(0,t*r),n.frame=u(e)}()}},{key:"stopScrolling",value:function(){this.scale=0,this.frame&&(u.cancel(this.frame),this.frame=null)}},{key:"handleMonitorChange",value:function(){var e=this.props.dragDropManager.getMonitor().isDragging();!this.dragging&&e?this.dragging=!0:this.dragging&&!e&&(this.dragging=!1,this.stopScrolling())}},{key:"componentDidMount",value:function(){var e=this;window.document.body.addEventListener("dragover",this.updateScrolling);var r=this.props.dragDropManager;this.clearMonitorSubscription=r.getMonitor().subscribeToStateChange(function(){return e.handleMonitorChange()})}},{key:"componentWillUnmount",value:function(){window.document.body.removeEventListener("dragover",this.updateScrolling),this.clearMonitorSubscription()}},{key:"render",value:function(){var e=this.props,r=(e.speed,e.area,e.dragDropManager,e.threshold,p(e,["speed","area","dragDropManager","threshold"]));return o.createElement(t,r)}}]),a}();return l(e,"propTypes",{speed:r.number,area:r.number,threshold:r.number}),l(e,"defaultProps",{speed:g,area:h,threshold:y}),e}return function(e){var n=t(e);return function(t){return o.createElement(a.DndContext.Consumer,null,function(e){var r=e.dragDropManager;return void 0===r?null:o.createElement(n,c({},t,{dragDropManager:r}))})}}});
